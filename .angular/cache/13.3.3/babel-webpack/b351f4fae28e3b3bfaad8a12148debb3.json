{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\GitHub\\\\Private\\\\Angular_WebApp\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { __asyncValues } from \"tslib\";\nimport { BlobServiceClient } from '@azure/storage-blob';\nimport * as i0 from \"@angular/core\";\nexport class BlobInService {\n  constructor() {\n    this.storageAccount = \"bapstorage\";\n    this.storageContainer = \"bap-storage-container\";\n  }\n\n  uploadBlob(content, name, client, handler) {\n    let blockBlobClient = client.getBlockBlobClient(name);\n    blockBlobClient.uploadData(content, {\n      blobHTTPHeaders: {\n        blobContentType: content.type\n      }\n    }).then(() => handler());\n  }\n\n  listBlobs(client) {\n    return _asyncToGenerator(function* () {\n      var e_1, _a;\n\n      let result = [];\n      let blobs = client.listBlobsFlat();\n\n      try {\n        for (var blobs_1 = __asyncValues(blobs), blobs_1_1; blobs_1_1 = yield blobs_1.next(), !blobs_1_1.done;) {\n          const blob = blobs_1_1.value;\n          result.push(blob.name);\n        }\n      } catch (e_1_1) {\n        e_1 = {\n          error: e_1_1\n        };\n      } finally {\n        try {\n          if (blobs_1_1 && !blobs_1_1.done && (_a = blobs_1.return)) yield _a.call(blobs_1);\n        } finally {\n          if (e_1) throw e_1.error;\n        }\n      }\n\n      return result;\n    })();\n  }\n\n  listBlobsPublic() {\n    return this.listBlobs(this.containerClient());\n  }\n  /*\r\n  private downloadBlob(name: string, client: ContainerClient, handler: (blob: Blob) => void) {\r\n  const blobClient = client.getBlobClient(name);\r\n  blobClient.download().then(resp => {\r\n    resp.blobBody.then(blob => {\r\n      handler(blob)\r\n    })\r\n  })\r\n  }\r\n    private deleteBlob(name: string, client: ContainerClient, handler: () => void) {\r\n  client.deleteBlob(name).then(() => {\r\n    handler()\r\n  })\r\n  }\r\n  */\n\n\n  containerClient() {\n    return new BlobServiceClient(`https://${this.storageAccount}.blob.core.windows.net?`).getContainerClient(this.storageContainer);\n  }\n\n}\n\nBlobInService.ɵfac = function BlobInService_Factory(t) {\n  return new (t || BlobInService)();\n};\n\nBlobInService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: BlobInService,\n  factory: BlobInService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"sources":["C:/GitHub/Private/Angular_WebApp/src/app/blob-in.service.ts"],"names":["__asyncValues","BlobServiceClient","i0","BlobInService","constructor","storageAccount","storageContainer","uploadBlob","content","name","client","handler","blockBlobClient","getBlockBlobClient","uploadData","blobHTTPHeaders","blobContentType","type","then","listBlobs","e_1","_a","result","blobs","listBlobsFlat","blobs_1","blobs_1_1","next","done","blob","value","push","e_1_1","error","return","call","listBlobsPublic","containerClient","getContainerClient","ɵfac","BlobInService_Factory","t","ɵprov","ɵɵdefineInjectable","token","factory","providedIn"],"mappings":";AAAA,SAASA,aAAT,QAA8B,OAA9B;AACA,SAASC,iBAAT,QAAkC,qBAAlC;AACA,OAAO,KAAKC,EAAZ,MAAoB,eAApB;AACA,OAAO,MAAMC,aAAN,CAAoB;AACvBC,EAAAA,WAAW,GAAG;AACV,SAAKC,cAAL,GAAsB,YAAtB;AACA,SAAKC,gBAAL,GAAwB,uBAAxB;AACH;;AACDC,EAAAA,UAAU,CAACC,OAAD,EAAUC,IAAV,EAAgBC,MAAhB,EAAwBC,OAAxB,EAAiC;AACvC,QAAIC,eAAe,GAAGF,MAAM,CAACG,kBAAP,CAA0BJ,IAA1B,CAAtB;AACAG,IAAAA,eAAe,CAACE,UAAhB,CAA2BN,OAA3B,EAAoC;AAAEO,MAAAA,eAAe,EAAE;AAAEC,QAAAA,eAAe,EAAER,OAAO,CAACS;AAA3B;AAAnB,KAApC,EACKC,IADL,CACU,MAAMP,OAAO,EADvB;AAEH;;AACKQ,EAAAA,SAAS,CAACT,MAAD,EAAS;AAAA;AACpB,UAAIU,GAAJ,EAASC,EAAT;;AACA,UAAIC,MAAM,GAAG,EAAb;AACA,UAAIC,KAAK,GAAGb,MAAM,CAACc,aAAP,EAAZ;;AACA,UAAI;AACA,aAAK,IAAIC,OAAO,GAAGzB,aAAa,CAACuB,KAAD,CAA3B,EAAoCG,SAAzC,EAAoDA,SAAS,SAASD,OAAO,CAACE,IAAR,EAAlB,EAAkC,CAACD,SAAS,CAACE,IAAjG,GAAwG;AACpG,gBAAMC,IAAI,GAAGH,SAAS,CAACI,KAAvB;AACAR,UAAAA,MAAM,CAACS,IAAP,CAAYF,IAAI,CAACpB,IAAjB;AACH;AACJ,OALD,CAMA,OAAOuB,KAAP,EAAc;AAAEZ,QAAAA,GAAG,GAAG;AAAEa,UAAAA,KAAK,EAAED;AAAT,SAAN;AAAyB,OANzC,SAOQ;AACJ,YAAI;AACA,cAAIN,SAAS,IAAI,CAACA,SAAS,CAACE,IAAxB,KAAiCP,EAAE,GAAGI,OAAO,CAACS,MAA9C,CAAJ,EAA2D,MAAMb,EAAE,CAACc,IAAH,CAAQV,OAAR,CAAN;AAC9D,SAFD,SAGQ;AAAE,cAAIL,GAAJ,EAAS,MAAMA,GAAG,CAACa,KAAV;AAAkB;AACxC;;AACD,aAAOX,MAAP;AAjBoB;AAkBvB;;AACDc,EAAAA,eAAe,GAAG;AACd,WAAO,KAAKjB,SAAL,CAAe,KAAKkB,eAAL,EAAf,CAAP;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGIA,EAAAA,eAAe,GAAG;AACd,WAAO,IAAIpC,iBAAJ,CAAuB,WAAU,KAAKI,cAAe,yBAArD,EACFiC,kBADE,CACiB,KAAKhC,gBADtB,CAAP;AAEH;;AApDsB;;AAsD3BH,aAAa,CAACoC,IAAd,GAAqB,SAASC,qBAAT,CAA+BC,CAA/B,EAAkC;AAAE,SAAO,KAAKA,CAAC,IAAItC,aAAV,GAAP;AAAoC,CAA7F;;AACAA,aAAa,CAACuC,KAAd,GAAsB,aAAcxC,EAAE,CAACyC,kBAAH,CAAsB;AAAEC,EAAAA,KAAK,EAAEzC,aAAT;AAAwB0C,EAAAA,OAAO,EAAE1C,aAAa,CAACoC,IAA/C;AAAqDO,EAAAA,UAAU,EAAE;AAAjE,CAAtB,CAApC","sourcesContent":["import { __asyncValues } from \"tslib\";\r\nimport { BlobServiceClient } from '@azure/storage-blob';\r\nimport * as i0 from \"@angular/core\";\r\nexport class BlobInService {\r\n    constructor() {\r\n        this.storageAccount = \"bapstorage\";\r\n        this.storageContainer = \"bap-storage-container\";\r\n    }\r\n    uploadBlob(content, name, client, handler) {\r\n        let blockBlobClient = client.getBlockBlobClient(name);\r\n        blockBlobClient.uploadData(content, { blobHTTPHeaders: { blobContentType: content.type } })\r\n            .then(() => handler());\r\n    }\r\n    async listBlobs(client) {\r\n        var e_1, _a;\r\n        let result = [];\r\n        let blobs = client.listBlobsFlat();\r\n        try {\r\n            for (var blobs_1 = __asyncValues(blobs), blobs_1_1; blobs_1_1 = await blobs_1.next(), !blobs_1_1.done;) {\r\n                const blob = blobs_1_1.value;\r\n                result.push(blob.name);\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (blobs_1_1 && !blobs_1_1.done && (_a = blobs_1.return)) await _a.call(blobs_1);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n        return result;\r\n    }\r\n    listBlobsPublic() {\r\n        return this.listBlobs(this.containerClient());\r\n    }\r\n    /*\r\n  private downloadBlob(name: string, client: ContainerClient, handler: (blob: Blob) => void) {\r\n    const blobClient = client.getBlobClient(name);\r\n    blobClient.download().then(resp => {\r\n      resp.blobBody.then(blob => {\r\n        handler(blob)\r\n      })\r\n    })\r\n  }\r\n\r\n\r\n  private deleteBlob(name: string, client: ContainerClient, handler: () => void) {\r\n    client.deleteBlob(name).then(() => {\r\n      handler()\r\n    })\r\n  }\r\n  */\r\n    containerClient() {\r\n        return new BlobServiceClient(`https://${this.storageAccount}.blob.core.windows.net?`)\r\n            .getContainerClient(this.storageContainer);\r\n    }\r\n}\r\nBlobInService.ɵfac = function BlobInService_Factory(t) { return new (t || BlobInService)(); };\r\nBlobInService.ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: BlobInService, factory: BlobInService.ɵfac, providedIn: 'root' });\r\n"]},"metadata":{},"sourceType":"module"}