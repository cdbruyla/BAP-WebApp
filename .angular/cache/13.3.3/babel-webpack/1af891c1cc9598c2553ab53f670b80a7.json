{"ast":null,"code":"// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { StorageClientContext } from \"./generated/src/storageClientContext\";\nimport { escapeURLPath, getURLScheme, iEqual, getAccountNameFromUrl } from \"./utils/utils.common\";\nimport { AnonymousCredential } from \"./credentials/AnonymousCredential\";\nimport { StorageSharedKeyCredential } from \"./credentials/StorageSharedKeyCredential\";\nimport { isTokenCredential, isNode } from \"@azure/core-http\";\n/**\n * A StorageClient represents a based URL class for {@link BlobServiceClient}, {@link ContainerClient}\n * and etc.\n */\n\nexport class StorageClient {\n  /**\n   * Creates an instance of StorageClient.\n   * @param url - url to resource\n   * @param pipeline - request policy pipeline.\n   */\n  constructor(url, pipeline) {\n    // URL should be encoded and only once, protocol layer shouldn't encode URL again\n    this.url = escapeURLPath(url);\n    this.accountName = getAccountNameFromUrl(url);\n    this.pipeline = pipeline;\n    this.storageClientContext = new StorageClientContext(this.url, pipeline.toServiceClientOptions());\n    this.isHttps = iEqual(getURLScheme(this.url) || \"\", \"https\");\n    this.credential = new AnonymousCredential();\n\n    for (const factory of this.pipeline.factories) {\n      if (isNode && factory instanceof StorageSharedKeyCredential || factory instanceof AnonymousCredential) {\n        this.credential = factory;\n      } else if (isTokenCredential(factory.credential)) {\n        // Only works if the factory has been attached a \"credential\" property.\n        // We do that in newPipeline() when using TokenCredential.\n        this.credential = factory.credential;\n      }\n    } // Override protocol layer's default content-type\n\n\n    const storageClientContext = this.storageClientContext;\n    storageClientContext.requestContentType = undefined;\n  }\n\n} //# sourceMappingURL=StorageClient.js.map","map":null,"metadata":{},"sourceType":"module"}